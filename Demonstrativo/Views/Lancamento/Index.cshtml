@model List<CategoriaViewModel>

@{
    ViewData["Title"] = "Lançamento";
}

@using (Html.BeginForm("Filtrar", "Lancamento", FormMethod.Post))
{
    <div class="fixed-top-filter p-3">
        <p>
            Empresa: @Html.DropDownList("EmpresaId", String.Empty)
            Comeprencia: @Html.DropDownList("CompetenciasId", String.Empty)
            <input type="submit" value="Enviar" />
        </p>
    </div>
}
@using (Html.BeginForm("Salvar", "Lancamento", FormMethod.Post))
{


    <div>
        <input type="submit" value="Enviar" />
        @{
            var indexLancamento = 0;
            var numero_take = 9;
        }
    </div>

    @while (numero_take < Model.Count)
    {
        var categorias = Model.Take(numero_take).ToList();

        <div class="row">
            @foreach (var categoria in categorias)
            {
                <div class="col">
                    <table class="table table-bordered inptable">
                        <thead>
                            <tr>
                                <th colspan="3">@categoria.Descricao</th>
                            </tr>
                        </thead>

                        @for (var i = 0; i < categoria.Contas.Count; i++)
                        {
                            var conta = categoria.Contas[i];

                            <tbody>
                                @for (int j = 0; j < conta.Lancamentos.Count; j++)
                                {
                                    var lancamento = conta.Lancamentos[j];

                                    <tr>
                                        <td class="codigo">
                                            @conta.Codigo<input type="hidden" name="lancamentos[@indexLancamento].ContaId" value="@conta.Id" />
                                        </td>
                                        <td class="descricao">
                                            @if (lancamento.PodeDigitarDescricao)
                                            {
                                                <input type="text" name="lancamentos[@indexLancamento].Descricao" value="@lancamento.Descricao" />
                                            }
                                            else
                                            {
                                                @conta.Descricao<input type="hidden" name="lancamentos[@indexLancamento].Descricao" value="@lancamento.Descricao" />
                                            }
                                        </td>
                                        <td class="valor">
                                            <input type="hidden" name="lancamentos[@indexLancamento].Id" value="@lancamento.Id" />
                                            <input type="text" class="mask-valor" name="lancamentos[@indexLancamento].Valor" value="@lancamento.Valor" onfocus="this.setSelectionRange(0, this.value.length);" />
                                            <input type="hidden" name="lancamentos[@indexLancamento].EmpresaId" value="@ViewBag.EmpresaSeleciodaId" />
                                            <input type="hidden" name="lancamentos[@indexLancamento].DataCompetencia" value="@ViewBag.CompetenciasSelecionadaId" />
                                        </td>
                                    </tr>

                                    indexLancamento++;
                                }

                            </tbody>
                        }
                    </table>
                </div>
            }
        </div>
        numero_take = numero_take + 9;
    }
}
<div class="row">
    <div class="col">
        <table class="table table-bordered inptable">
            <thead>
                <tr>
                    <th colspan="2">COMPRAS</th>
                    <th>Resultado</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">Total Compras 1o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">Total Compras 2o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">Total Compras 3o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
                <tr>
                    <td colspan="2">( - ) Estoque Final</td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
                <tr>
                    <td colspan="2">( = ) Custo das Mercadorias Vendidas</td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
            </tbody>
        </table>
    </div>
    <div class="col">
        <table class="table table-bordered inptable">
            <thead>
                <tr>
                    <th colspan="2">RECEITAS</th>
                    <th>Resultado</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">Total Receitas 1o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">Total Receitas 2o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">Total Receitas 3o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">( = ) Lucro Bruto (R$)</td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
                <tr>
                    <td colspan="2">
                        ( = ) Margem Bruta Total em %
                    </td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
            </tbody>
        </table>
    </div>
    <div class="col">
        <table class="table table-bordered inptable">
            <thead>
                <tr>
                    <th colspan="2">DESPESAS</th>
                    <th>Resultado</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">Total Despesas 1o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">Total Despesas 2o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">Total Despesas 3o. mês</td>
                    <td>00,00</td>
                </tr>
                <tr>
                    <td colspan="2">( - ) Provisão de 13° Salário</td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
                <tr>
                    <td colspan="2">( - ) Provisão de Férias</td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
                <tr>
                    <td colspan="2">( - ) Depreciações</td>
                    <td>00,00</td>
                </tr>
                <tr><td></td></tr>
            </tbody>
        </table>
    </div>
</div>
<div class="row">
    <table class="table table-bordered">
        <tr>
            <td colspan="4"> ( = ) Lucro do Período </td>
            <td>0,00</td>
        </tr>
        <tr>
            <td colspan="4"> ( - ) Saldo Prejuízos Acumulados </td>
            <td>0,00</td>
        </tr>
        <tr>
            <td colspan="4"> Compesação Prejuízo (30% Lucro do Período) </td>
            <td>0,00</td>
        <tr>
            <td colspan="4">( = ) Base de Cálculo do CSLL/IRPJ</td>
            <td>0,00</td>
        </tr>
    </table>
</div>
<div class="row">
    <div class="col">
        <table class="table table-bordered inptable">
            <thead>
                <tr>
                    <th colspan="3">APURAR</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">( - ) Contribuição Social - 9%</td>
                    <td>00,00</td>
                </tr>
                <tr><td colspan="3"></td></tr>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td colspan="2">( - ) Imposto de Renda - 15%</td>
                    <td>00,00</td>
                </tr>
                <tr><td colspan="3"></td></tr>
                <tr>
                    <td colspan="2">( - ) Adicional do IR (10% sobre excedente de R$60.000,00 do lucro)</td>
                    <td>00,00</td>
                </tr>
                <tr><td colspan="3"></td></tr>
            </tbody>
        </table>
    </div>
    <div class="col">
        <table class="table table-bordered">
            <tr>
                <td colspan="4"> ( = ) Lucro Real </td>
                <td>0,00</td>
            </tr>
        </table>
    </div>
</div>